<!DOCTYPE html>
<meta charset="utf-8">
<html> 
    <head>
        <title>Beach Closings</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
        <link href="//maxcdn.bootstrapcdn.com/bootswatch/3.3.1/cerulean/bootstrap.min.css" rel="stylesheet">

        <link href="../webpage/css/openwater.css" rel="stylesheet">

    </head>
    <body>

        <style>
            .jumbotron{
                background-image:url("../webpage/img/chicagoBeach.jpeg");
                margin-bottom: 0px;
            }

            #beachChart {
                margin-top:30px;
            }
        </style>

        <div class="jumbotron" id="beachHeroImage">

            <div class="container">
                <div class="col-xs-12 col-sm-11 col-sm-offset-2">
                    <h1>Chicago Beach Health</h1>
                    <p>
                        Chicago has <strong>27</strong> beaches along a coast that
                        contains almost 90% of North America's surface freshwater.
                    </p>
                </div>
            </div>

        </div>
        <div class="blueBackground">
            <div class="container">

                <h2 class="centerThis">
                    As a source of drinking water and leisure, the health of our beaches
                    is indicator as our health as Chicagoans.
                </h2>
            </div>
        </div>

        <div class="theCharts">

            <div id="byBeach">
                <div ng-app="byBeachApp">
                    <div ng-controller="byBeachCtrl" id="controllerId">

                        <button ng-click="ascendingByBeach()">Ascending</button>
                        <button ng-click="descendingByBeach()">Descending</button>
                        <highchart id="byBeachChart" config="byBeachNG"></highchart>
                    </div>
                </div>
            </div>
            <div id="byMonth"></div>
            <div id="byDate"></div>

        </div>

        <script src="http://d3js.org/d3.v3.min.js"></script>

        <script>
            var closingsByBeach = {};
            var closingsByMonth = {};
            var closingsByDate = {};

            d3.csv("data/beachClosings.csv", function(error, beachClosings) {

                beachClosings.forEach(function(d) {

                    closingsByBeach[d.beachName] = closingsByBeach[d.beachName] + 1 || 1;
                    closingsByDate[d.closedDate] = closingsByDate[d.closedDate] + 1 || 1;
                    var dateSplit = d.closedDate.split("-");
                    closingsByMonth[dateSplit[1]] = closingsByMonth[dateSplit[1]] + 1 || 1;
                });
                
                    angular.element(document.getElementById('controllerId')).scope().ascendingByBeach();
    angular.element(document.getElementById('controllerId')).scope().$apply();

            });

        </script>

        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>

        <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>

        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.0/angular.min.js"></script>
        <script>alert("1");</script>
        <script src="http://code.highcharts.com/highcharts.js"></script>

        <script src="http://code.highcharts.com/modules/data.js"></script>
        <script src="https://rawgit.com/pablojim/highcharts-ng/master/dist/highcharts-ng.js"></script>
        
        <script src="js/byBeachChart.js"></script>
        <script>alert("2");</script>

        <hr>
        <div class="container">
            <h2>The main cause for closures is Ecoli</h2>
            <h4>What is it, where does it come from?</h4>
            <h6>1. Dog Beaches - Draw map here of dog beaches versus closures</h6>
            <h6>2. Seagulls - clean up your trash, beach cleanup</h6>
            <h6>3. Combined Sewer Overflows -- follow this link</h6>       
        </div>


        <script>



        </script>

    </body>
</html>